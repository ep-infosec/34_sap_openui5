<!DOCTYPE html>
<html lang="en">

<head>
	<title>CSRF Tokens</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="../../scripts/boot.js"></script>
</head>

<body class="sapUiBody topicBody">
	<div class="topic">
		<div class="content">
			<h1>Integrate CSRF Tokens</h1>
			<h2 id="overview">
				Overview
			</h2>
			<p>
				CSRF (Cross Site Request Forgery) Tokens help to prevent CSRF attacks.
				The tokens are defined by the card developer in the <code>configuration</code>
				part of the <code>manifest</code> and can be resolved by the application with the help of
				<a data-demokit-href="#/api/sap.ui.integration.Host"
					target="_blank"><code>sap.ui.integration.Host</code></a>.
				The host application developer can override the <code>getCsrfToken</code> method that resolves
				the CSRF Token configuration to a <code>Promise</code> which further resolves its value.
				The card calls this function to resolve a token in a request that needs it.
			</p>

			<h2 id="examples">
				Example
			</h2>

			Controller
			<pre class="lang-js">
var MyHostClassName = sap.ui.integration.Host.extend("MyHostClassName", { });

MyHostClassName.prototype.getCsrfToken = function (mCsrfTokenConfig) {
	var sTokenValue = "randomTokenValue"; // fetch the correct value

	return Promise.resolve(sTokenValue);
};

var oHost = new MyHostClassName();

this.getView().byId('card1').setHost(oHost);</pre>

			XML View
			<pre class="lang-xml">
&lt;mvc:View xmlns:w="sap.ui.integration.widgets"&gt;
	&lt;w:Card id="card1" manifest="./manifest.json" /&gt;
&lt;/mvc:View&gt;</pre>
		</div>
		<div class="navigation">
			<h4>Table of Contents</h4>
			<div><a href="#overview">Overview</a></div>
		</div>
	</div>


</body>

</html>